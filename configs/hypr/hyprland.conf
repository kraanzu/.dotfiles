env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1

# Basic settings
input {
    repeat_rate = 50
    repeat_delay = 400
}

general {
    gaps_in = 4
    gaps_out = 4
    border_size = 3
    col.active_border = rgb(88c0d0)
    col.inactive_border = rgba(88c0d000)
}

decoration {
    rounding = 0
}

animations {
    enabled = false
}

group {
    col.border_active = rgb(88c0d0)
    col.border_inactive = rgba(88c0d000)
    groupbar {
        enabled = false
        indicator_gap = 0
        indicator_height = 10
        priority = 3
        render_titles = false
        col.active = rgb(88c0d0)
        col.inactive = rgb(4c566a)
    }
}

# Workspaces
workspace = 1, persistent:true
workspace = 2, persistent:true
workspace = 3, persistent:true
workspace = 4, persistent:true
workspace = 5, persistent:true
workspace = 6, persistent:true
workspace = special:scratch,gapsout:100 150, on-created-empty:wezterm-gui

# Flameshot fix
windowrule {
    name = flameshot-fix
    match:title = flameshot
    suppress_event = fullscreen
    group = override barred
    move = 0 0
    pin = on
    fullscreen_state = 0 2
    float = on
}

# Window Rules (new syntax)
windowrule = workspace special:hidden silent, match:title ^(.* is sharing your screen\.)$
windowrule = float on, size 1000 800, match:title ^(Select what to share)$
windowrule = group set always, match:class .*
windowrule = float on, group override barred, match:class nemo
windowrule = suppress_event fullscreen, match:class org.telegram.desktop, match:title Media viewer

# Window Management
bind = SUPER, Q, killactive
bind = SUPER, M, fullscreen, 1
bind = SUPER SHIFT, F, togglefloating

# Group Management
bind = SUPER, G, togglegroup
bind = SUPER, SPACE, changegroupactive, f
bind = SUPER SHIFT, G, lockactivegroup, toggle

# Launch bindings
bind = SUPER, Return, exec, wezterm-gui connect unix --workspace main
bind = SUPER, S, togglespecialworkspace, scratch
bind = ALT, Return, exec, rofi -show drun
bind = ALT, O, exec, rofi-audio-switcher
bind = ALT, N, exec, rofi-network-switcher
bind = ALT, B, exec, rofi-bluetooth
bind = ALT, Q, exec, rofi-power-menu
bind = ALT, P, exec, cliphist list | rofi -dmenu | cliphist decode | wl-copy

# Volume controls
bindl = SUPER, Up, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.05+
bindl = SUPER, Down, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.05-
bindl = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.05+
bindl = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.05-
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Monitor brightness
bindl = SUPER, Home, exec, ddcutil setvcp 10 + 5
bindl = SUPER, End, exec, ddcutil setvcp 10 - 5

# Workspace navigation and moving (Qtile style wrap-around)
bind = SUPER, Right, exec, hyprctl dispatch workspace $((($(hyprctl activeworkspace -j | jq -r '.id') % 6) + 1))
bind = SUPER, Left, exec, hyprctl dispatch workspace $((($(hyprctl activeworkspace -j | jq -r '.id') - 2 + 6) % 6 + 1))
bind = SUPER SHIFT, Right, movetoworkspace, +1
bind = SUPER SHIFT, Left, movetoworkspace, -1
bind = SUPER, Tab, workspace, previous

# Workspace switching
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER SHIFT, 1, movetoworkspace, 1
bind = SUPER SHIFT, 2, movetoworkspace, 2
bind = SUPER SHIFT, 3, movetoworkspace, 3
bind = SUPER SHIFT, 4, movetoworkspace, 4
bind = SUPER SHIFT, 5, movetoworkspace, 5
bind = SUPER SHIFT, 6, movetoworkspace, 6

# Extras
bind = SUPER, Insert, exec, grim -g "$(slurp)" - | swappy -f -
bind = CTRL ALT, Delete, exit
bind = SUPER, ESCAPE, exec, hyprlock

# Moving windows
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

# Startup
exec-once = hyprpaper
exec-once = hypridle
exec-once = wlsunset -t 5500
exec-once = wezterm-mux-server --daemonize
exec-once = syncthing --no-browser
exec-once = Telegram -startintray
exec-once = discord --start-minimized
exec-once = systemctl --user import-environment PATH && systemctl --user restart xdg-desktop-portal.service
exec-once = wl-paste --watch cliphist store
exec-once = nm-applet
exec-once = pkill waybar; waybar
